<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>馒头书局</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="stylesheet" href="css/mantou.css">
        <link rel="stylesheet" href="css/animate.min.css">
        <link rel="shortcut icon" type="image/png" href="/mantou-favicon.png"/>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162786304-1"></script>
        <script>
              window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-162786304-1');
        </script>


        <script src="js/libs/jquery.min.js"></script>

        <script src="js/libs/zip.min.js"></script>
        <script src="js/color.js"></script>


        <!-- File Storage -->
        <!-- <script src="js/libs/localforage.min.js"></script> -->

        <!-- Plugins -->
        <!-- <script src="js/plugins/search.js"></script> -->

        <!-- Highlights -->
        <!-- <script src="js/libs/jquery.highlight.js"></script> -->
        <!-- <script src="js/hooks/extensions/highlight.js"></script> -->
	<script>
        /*
		  (function(d) {
			      var config = {
				            kitId: 'sff2ciq',
				            scriptTimeout: 3000,
				            async: true
				          },
				      h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
			    })(document);
                */
		$(function(){

			$.get(
				"__books",
				{},
				function(data) {
					var book_text = data;
					var books = [];
					book_text.split("\n").forEach(function (item) {
                        if (item.trim().length > 1) {
						    books.push(item.trim().split(/\s+/));
                        }
					});
					var count = 0;
					books.forEach(function(item) {
                        let index = item[0]
						let title = item[1];
						let author = item[2];
						let year = item[3];
						count += 1;
						var book_list_t = ` 
							  <li class="item" id="${index}">
								  <div class="border-wrap">
									  <div class="cover shadow-cover "><div width="210px" height="298px" style="display:flex; flex-direction:column; flex:1"><div class="cover-title">${title}</div> <div class="cover-author">${author}</div><div class="cover-date small-name">${year}年</div></div></div>
									<p class="actions"><span class=""><a href="/reader.html?bookPath=./book/${index}.epub" target="_blank">阅读</a></span></p>
								</div>
							  </li>
						`
						$("#a").append(book_list_t);
				        }
			        );
                    $(".cover").each(function() {$(this).css("background", randomColor({seed:$(this).parent().parent().attr("id")}))});
                    $(".cover").each(function() {$(this).css("color", randomColor({t:1, seed:$(this).parent().parent().attr("id")}))});
            });

		})
	</script>

    </head>
    <body>
		<div id="right-nav" class="overlay">
		  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
		  <div class="overlay-content">
			<a href="./books.html" target="_blank">书局书目</a>
			<a href="https://github.com/mantou-io/mantou-books/issues" target="_blank">图书报错</a>
			<a href="https://github.com/mantou-io/mantou-reader/issues" target="_blank">功能反馈</a>
			<a href="https://github.com/mantou-io/mantou-reader/wiki/%E5%BC%80%E5%8F%91%E6%97%A5%E8%AE%B0" target="_blank">开发日记</a>
			<a href="https://github.com/mantou-io/mantou-serif" target="_blank">馒头字体</a>
			<a href="javascript:;" id="contact-us">联系我们</a>
            <span id="us-email" class="m-top1">subdragon@gmail.com<span>
		  </div>
		</div>

		<div id="flow-notice" class="overlay">
		  <div class="overlay-content">
              <span style="padding:0 50px">
                <span class="warn-color"> 流量消耗提醒
                </span>
                <span class="m-top1 warn-color">
                    为达到最佳浏览效果，第一次访问本网站需要加载 30MB 左右大小的字体。建议在网络流畅，流量成本低的情况下第一次打开。
                </span>
                <span class="m-top1">
                    <a href="javascript:void(0)" class="closeflow" onclick="closeFlow()">我已知晓 马上打开</a>
                </span>
              </span>
		  </div>
		</div>
      <div id="header">
	      <div class="logo" onclick="openNav()" style="animation-iteration-count:infinite">
              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                  width="29" height="29"
                  viewBox="0 0 172 172"
                  style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#2d442c"><path d="M86,6.88c-3.50719,0 -6.42312,1.80063 -8.17,3.9775c-1.74687,2.17688 -2.67406,4.6225 -3.5475,6.7725c-0.87344,2.15 -1.73344,4.01781 -2.58,5.0525c-0.84656,1.03469 -1.30344,1.3975 -2.9025,1.3975c-0.77937,0 -3.1175,-0.645 -5.59,-1.505c-2.4725,-0.86 -5.13312,-1.935 -8.17,-1.935c-1.88125,0 -4.05812,0.47031 -6.235,2.0425c-2.17687,1.57219 -4.085,4.58219 -4.085,8.2775c0,4.20594 1.45125,7.525 2.4725,10.6425c-24.02625,13.81375 -40.3125,39.13 -40.3125,65.0375c0,19.12156 9.19125,34.09094 23.65,43.86c14.45875,9.76906 34.05063,14.62 55.47,14.62c21.41938,0 41.01125,-4.85094 55.47,-14.62c14.45875,-9.76906 23.65,-24.73844 23.65,-43.86c0,-24.92656 -15.09031,-49.39625 -37.625,-63.5325c0.06719,-0.56437 0.12094,-1.15562 0.215,-1.72c0.44344,-2.62031 1.20938,-5.10625 1.8275,-7.4175c0.61813,-2.31125 1.1825,-4.27312 1.1825,-6.45c0,-5.93937 -4.93156,-10.32 -10.32,-10.32c-4.01781,0 -6.94719,2.16344 -9.9975,3.87c-3.05031,1.70656 -6.10062,3.01 -7.2025,3.01c-1.55875,0 -2.05594,-0.34937 -2.9025,-1.3975c-0.84656,-1.04812 -1.69312,-2.9025 -2.58,-5.0525c-0.88687,-2.15 -1.81406,-4.59562 -3.5475,-6.7725c-1.73344,-2.17687 -4.68969,-3.9775 -8.17,-3.9775zM86,13.76c1.49156,0 1.96188,0.34938 2.795,1.3975c0.83313,1.04813 1.67969,2.9025 2.58,5.0525c0.90031,2.15 1.77375,4.59563 3.5475,6.7725c1.77375,2.17688 4.77031,3.9775 8.2775,3.9775c4.12531,0 7.44438,-2.13656 10.535,-3.87c3.09063,-1.73344 6.08719,-3.01 6.665,-3.01c1.63938,0 3.44,1.34375 3.44,3.44c0,0.5375 -0.36281,2.4725 -0.9675,4.73c-0.60469,2.2575 -1.41094,5.02563 -1.935,8.0625c-1.04812,6.08719 -1.03469,13.50469 3.5475,20.1025c0.59125,1.22281 1.84094,1.97531 3.19813,1.935c1.35719,-0.04031 2.56656,-0.87344 3.07719,-2.12312c0.52406,-1.26313 0.25531,-2.70094 -0.68531,-3.68188c-1.08844,-1.55875 -1.81406,-3.23844 -2.2575,-4.945c18.42281,13.26281 30.4225,34.37313 30.4225,55.04c0,16.97156 -7.71312,29.42813 -20.64,38.1625c-12.92687,8.73438 -31.21531,13.4375 -51.6,13.4375c-20.38469,0 -38.67312,-4.70312 -51.6,-13.4375c-12.92687,-8.73437 -20.64,-21.19094 -20.64,-38.1625c0,-22.17187 13.78688,-44.88125 34.5075,-57.835c-0.18812,2.20375 -0.98094,4.64938 -3.01,7.74c-1.075,1.59906 -0.63156,3.7625 0.9675,4.8375c1.59906,1.075 3.7625,0.63156 4.8375,-0.9675c4.515,-6.88 4.58219,-13.18219 3.44,-18.06c-1.14219,-4.87781 -2.9025,-8.47906 -2.9025,-11.395c0,-1.65281 0.44344,-2.16344 1.1825,-2.6875c0.73906,-0.52406 2.02906,-0.7525 2.2575,-0.7525c1.16906,0 3.48031,0.645 5.9125,1.505c2.43219,0.86 4.93156,1.935 7.8475,1.935c3.52063,0 6.51719,-1.78719 8.2775,-3.9775c1.76031,-2.19031 2.66063,-4.6225 3.5475,-6.7725c0.88688,-2.15 1.74688,-4.00437 2.58,-5.0525c0.83313,-1.04812 1.24969,-1.3975 2.795,-1.3975zM85.6775,41.1725c-0.14781,0.02688 -0.29562,0.06719 -0.43,0.1075c-1.59906,0.36281 -2.72781,1.80063 -2.6875,3.44v13.76c-0.01344,1.23625 0.63156,2.39188 1.70656,3.02344c1.075,0.61813 2.39187,0.61813 3.46687,0c1.075,-0.63156 1.72,-1.78719 1.70656,-3.02344v-13.76c0.04031,-0.99437 -0.36281,-1.94844 -1.075,-2.62031c-0.72562,-0.68531 -1.70656,-1.02125 -2.6875,-0.92719zM68.4775,44.6125c-0.14781,0.02688 -0.29562,0.06719 -0.43,0.1075c-1.59906,0.36281 -2.72781,1.80063 -2.6875,3.44c0,12.44313 -3.1175,19.2425 -3.1175,19.2425c-0.68531,1.14219 -0.645,2.56656 0.08063,3.66844c0.73906,1.10188 2.0425,1.69313 3.35937,1.505c1.30344,-0.18812 2.40531,-1.11531 2.795,-2.37844c0,0 3.7625,-8.385 3.7625,-22.0375c0.04031,-0.99437 -0.36281,-1.94844 -1.075,-2.62031c-0.72562,-0.68531 -1.70656,-1.02125 -2.6875,-0.92719zM106.3175,44.6125c-0.14781,0.02688 -0.29562,0.06719 -0.43,0.1075c-1.59906,0.36281 -2.72781,1.80063 -2.6875,3.44c0,5.24063 0.81969,14.28406 7.31,25.8c0.95406,1.66625 3.06375,2.24406 4.73,1.29c1.66625,-0.95406 2.24406,-3.06375 1.29,-4.73c-5.88562,-10.4275 -6.45,-17.76437 -6.45,-22.36c0.04031,-0.99437 -0.36281,-1.94844 -1.075,-2.62031c-0.72562,-0.68531 -1.70656,-1.02125 -2.6875,-0.92719z"></path></g></g></svg>
		      馒头书局
	      </div>
      </div>
      <div id="main">
          <section class="ebooks-list">
              <div class="bd" id="a">
              </div>
          </section>
      </div>
          </section>
      </div>
      <div id="footer">

          <span>Created by subdragon with ♥ in Beijing 2020 </span>
      </div>
<script>
function openNav() {
	$("#right-nav").removeClass("slideOutRight");
	$("#right-nav").addClass("animated");
	$("#right-nav").addClass("slideInRight");
}

function closeNav() {
	$("#right-nav").removeClass("slideInRight");
	$("#right-nav").addClass("slideOutRight");
}

function openFlow() {
	$("#flow-notice").removeClass("slideOutUp");
	$("#flow-notice").addClass("animated");
	$("#flow-notice").addClass("slideInDown");
}

function closeFlow() {
    localStorage.setItem('mantou', 1);
    get_font();
	$("#flow-notice").removeClass("slideInDown");
	$("#flow-notice").addClass("slideOutUp");
}

$("#contact-us").click(function(){
    $("#us-email").toggle();
})

</script>
<script src="js/webfont.js"></script>
    <script>
        if(localStorage.getItem('mantou') != 1) {
            openFlow();
        } else {
            get_font();
        }

function get_font() {
    var WebFontConfig = {
      custom: {
        families: ['source-han-serif-sc'],
        urls: ['css/fonts.css'],
      },
      loading: function () {
        $(".logo").addClass("animated");
        $(".logo").addClass("pulse");
      },
      active: function () {
        $(".logo").removeClass("animated");
        $(".logo").removeClass("pulse");
        $(".logo").removeClass("heartBeat");
      },

    };
    WebFont.load(WebFontConfig);
}
    </script>
    </body>
</html>
